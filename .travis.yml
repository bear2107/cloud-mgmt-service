language: bash

services:
- docker

jobs:
  include:
  - stage: docker-build
    if: branch = master OR tag IS present
    script: "./ci/travis_docker_build.sh"

env:
  global:
  - secure: U0t/wa2WNxLrqOc2d2TViLApebAwKifUnnc0eXcP+w81eltTck6edUC1bxnnkn2PJdN+zVLLbGq8fyT7LzLjReXwQCd9aZpxJUyrmOVaFU6xsE2BK9fIshbzU1FjNcMRQQ6YbDrs3bb7P5lxdmyEGBEftphGKu97dGu8dwOSyaGr4d0edTQ5OMTFPRpaFFf7iJbyQUhvfypn8q6U+2hvYCnb3Zy5PvZNALdVmG+S1DfBRmtA0JzLZrOdfNX/17QdJtnzsSm1eUbR+Dwku6dLR7TyrBsCHxhuLnIO5DKLQYRaLgYT3BXeZNR94yVu/yay8KhCrjrsyQaSP5jPE/zjPUD/af9qeh2hgkTGUYPD+bLDF1vgjnb3IaDJRS7xV0xJWN1Usu/00pbZzkc13esPFj1FhOFeXjv3L5SUC/QlQE03nsRnXLxBI5DLCIAUtaEi6bJXhJar9J/Lt9vYmqC8SUKqPb+35UHiE6e7APo4V2mBbwiobCRRUUFwOeBDoIzfqv4BRbdAfEULYJWdgGv9J0OE0Dqe1QW2KrrCNVs5Tr9cH9gi9oyU72dyADWXuSKv5UqQDG31Yn12Q83qpSVMmHrMKUPjhGTx+V+m3rOM4iQ5E7tAwCngouRk99bwZRTJ+RtVvQ/RImqmHcD8AnQsyHr1WKcD98n62LpPhwWwh4k=
  - secure: lS2dLVYULOoPk45QZitmHEuIPJkFWLPq3jtnZvLtsSemfrTIjU3mHprWPowEx0ikgBj8CZ11PBWmQS0P9PEzt4TlCvNwGS5oFsvmfo/tIwgW5pgiQnB64eznrggIifaG0bUGREhb+OGhAUFHp/u3ruyKAhCGoctQSob4l770hiRBOcyLmKlfMG8G7rAsC05QbMsefMds7XbE7MRW7JWGKpiRi+i/JEAe5FJBCWP/3joMSUwm7KOwezuWzAfKIxFg0u994uwKzpeolIE5p8mVbmUqQDIl633SK1PRwfH9sO51yzERpsG4xy/tSLV5WFPv7PAU4M4+EdskWXupRmx9oYxOgkJzMvdfBQfvYu5QA8mfzKBk/kA60IV/PI9pEmwmUXWbhLLwioygixCWHvLzp54mxEVd85qYL1K4dacVINvanaZgja8eZwfKtmdtW8yMdh8JfhlRuiVTSR7hFtd85jZ2aWgDeGGoXI2LOeS0vSF9TMnHnV/5AgVCUhcoPapcpigJSstLhNBgQDBioH77mJEBexTu8r2pYyELMgeal+RjjxSSUX5F6PbV2MOos7ChJI+3522qXyUfg5ns7+r58Vo0dF74xEqhoF1sJ8srmzPoDmH1jl82YLHGy5H57cS4Bh839kONtSCdnDuFIp6AHVyZyWg+87a5u2TNg+g0TO0=
  - secure: K9Cm7dqNHj/JXFuSy2sbNgWKxFn2uPt45+WCt8VDhj889VT+XObnV1+rqMXhwW8VcdkLxFJ1ePiy1KM4Yehr9VTz9mwijkPv4n/DUqSnr7ttEYMDNRQ/o5PV/nE516fxcrDiELr0hnosjV/Kf8YFBcVFmPE8e4L5mGwBC4abeUHX5X8BhnY6O0XYRmgk3D0yeB1sXtYaJUOdJutHy0kUn5FSTXQFn9RPyQKTA3vieABE2r3slhiPoH7ACPsv9x9d8FUmVoUcesbujAUXGtkXSrR+cps/+eKQfFEfdm8ZyAzMPiJLXFL1q42fEhpwNrIuYu132xTJZ5hsfY0pDj5cH/Dhbl1njuxhIsm42y8Wsq9gmaYL3GCRHfBQzwy6polx85NQ2cu/Cb4Mr9mkeXCg0TtqZfxOmBpB4p6MLDvKZoC3hij6b3ULxTaLD0w8QAOol+Hk8sorHyvfFmXEteIt5gfv0c5E5WDhCrZytmjvBKRdT7DTh955dj+5TzMgpVdnGbe+P5MOrzHdmbwcIijiLqYbjS8Bx83UmnVVWnFBs6dc6vruleAGKimdy33Wg97TJOJP0Sy7Wm4eheYnZOKDiwls9WKwDongzdUA4IMtaJFifrcVVoFwolyVuoO1dmCRLP1f2sKuvRFhsnP4awkCuIqp1hp+jO0gMtHLhB7kg/U=
  - secure: KB6xkFEnV8dOBmzgHex0+lYKi0nXbMoUPP1vBlP8q5gNpBnbVkdBXTw7w2c/kDXcZ8zQEHSBc8fM9I0wY38BDLlGPHL8zR4VucxgyT29QWHvn1PxB0X9FyotuLfoQvsVN5F6fj51oH09bXJoxbCdqaEfiMTRxLvGeFCBrjnwvXPH3QEhg35xBhIiqvk0LGRbf7pjdc+vmhBFi9Nf7GFmYSDBh6XhGaPe/IcsaucCRN3xazExoSvE6Hz3zX+k00F2Hyuh39uBUwJBDpS5q+oGq1f/OmZmzQ0M/Smb2hKd8zjQ9RVSmSNVf9i+jz/7qvmtTLnzX5cvnmVP7HAvHSsotsdartBYSFaIQOkwQOexzDuONrJRzJzfBKMcnhx+teS8uc/XwbPiBXLXRgoKIfCLBk6WSN8W+aZN/FSHw4szMu3AqVT4nJcRxifGtvl5eU1RBLM6XnEMoU+hcJt0+teWVQzN0evtuqlTQDnytqqv8pHCBCpb5kEFd/EJssdCtcpSot8EZDcT3utFpgQIj8qXL1K79f8m+1r5Ncl25qv6pVEeAKNCAWa2RO/HMe/ShlHjHI0eItC4N0w9NPtWBzKSayydPyJFZ5VaRNPzTC5akn+HZZ0vcNxMT2WnDtMg6Fgg4VLxqQHcb7ujk2KTdUKs/wqL7ux6+iEIvRRGcwITHuY=
  - secure: nbmeG/LALMt7hh1x3Ovbn4la/nT1ke9+6dAdCeSz1gzU9fDdgBiIpJJotXKtjX6DiXyvU5UIt1uiO3IM5gnkzlT95nKvYKxU81mzh1PqmOHWEoDkk/jR/Q3HHuc3UoiJBWidL/L6SuCrvtYHZUfPk0gvZWayz5ynBDm0k5e1DyzrXOcvi+u48frEI+/BvQgt5tyISucE6gJ/d3qrzscU0I4uFFC0I2TQ1lTCygY+HVu2gzOHgkCouXZmgJwkURnCZQFx3QzLUnL/9EosW0oVhaql1LJH30AzYkWY8tdHpOLmvHn5ywy33fCoeQc88p0nWt13z8Fo9Xh4DTEcJGgfRqloq5DiU2dKfjTB9HsxygK4SWZQYErq5cCNhs4d3CXjMav/Qnw/xYOFI39k7G7GKpqrqxxV3Lh45lF6qbpV6pR11v986dE2ofOd+eP6+zaCk2LvrIK4zEjR4vBKeQA5gP+azHnVjDaMkAFMJm5NASCUNuOK/PjgU2LBSr8uEko3kCDSnmwbN8FLyxif3LF/lQ+8NxpCrKj1WoiI+q1pTwGgrgrJZ5KcZAqtB5eMwQoS/PuZs1lg20xIXJnO2WI/y6GhDJylYlRgtn2/CNqc5pBGXa4cVIzCCCKXGDcI7TGHio/N57g9EfFg/kcWMmyVX7EXFMMCdXCv0yVfaV/aClk=
  - secure: AYpTqTSmUsEBHReqSGTpOxfMn9EuVCLib0XO08U3j35enSsk07p9ikSkoyUKHmOhyDNobsj+u5PgMRgtsaxlLxMQLiTUuiNt02XImnyOWU04siY7XaIrPYSWwQzu5ZcxHY6lb8OvpNKITX9QcgCWnaqehFB/40mC4qCSAMHRH288B1qqjxCNMwrUatD8caZyIXmVUvQMTurbHnQYVHYUXbYCTGmHpFVEOMcYiDYSfKpKx9Bctz8S7S2MgHNfRjM5JbWv0jTn9Z51JFrOtf92XtAfuD7unD1g0jnMuHEGzuEuwmPuhtRlJa5PueJBgVvWf+odxgwWgHPwl4dIJV0PVCm+YGPeQQSXWNBO4g4botC41FS5EzEuZWU/8hnXnzuzy/QqoRi7fu4p+qVSVS4QtppHXfTOjCTx8Bf+jy0LIkUFfuRJac0ICkmTUtID5mmJMLdFejCpLxNiaVhSrbBuRBOQOTIuj1jHAU6Ezs1YbucmBynHmyQug7wwFuYZSdMGItiGBV9o7zpHdrY1tO5cFWgqJ5N/qp9KC6wjR0VxSLpnPCAskTBEeI/O+DzZ92QyffRZkyS19CWNYfYirStZriF15uVSw9MdTa4gY081t1C2Fi0mpoHCBxsQKvRNRowi//aNy1qcQdy28ZGQe7+V7UGTwmZRq5ipRhrZpWH0LNo=
